"use strict";(self.webpackChunkscrap_computers_docs=self.webpackChunkscrap_computers_docs||[]).push([[9657],{4790:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Addon API/managers/power-manager","title":"PowerManager","description":"Allows components to be affected by the power system","source":"@site/docs/Addon API/managers/power-manager.md","sourceDirName":"Addon API/managers","slug":"/Addon API/managers/power-manager","permalink":"/docs/Addon API/managers/power-manager","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"PowerManager","description":"Allows components to be affected by the power system"},"sidebar":"sidebar","previous":{"title":"LanguageManager","permalink":"/docs/Addon API/managers/language-manager"},"next":{"title":"SyntaxManager","permalink":"/docs/Addon API/managers/syntax-manager"}}');var t=r(4848),o=r(8453);const a={title:"PowerManager",description:"Allows components to be affected by the power system"},c=void 0,i={},l=[{value:"Callbacks &amp; Custom Data",id:"callbacks--custom-data",level:2},{value:"Receiving Type",id:"receiving-type",level:3},{value:"Generating Type",id:"generating-type",level:3},{value:"<code>battery</code> type",id:"battery-type",level:3},{value:"<code>breaker</code> type",id:"breaker-type",level:3},{value:"Functions",id:"functions",level:2},{value:"createPowerInstance",id:"createpowerinstance",level:3},{value:"createCustomComponent",id:"createcustomcomponent",level:3},{value:"updateCustomComponent",id:"updatecustomcomponent",level:3},{value:"updatePowerInstance",id:"updatepowerinstance",level:3},{value:"removePowerInstance",id:"removepowerinstance",level:3},{value:"isEnabled",id:"isenabled",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"The Power Manager allows you to make your components to be affected by the power system, this include allowing them to receive, give or transmit power."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"callbacks--custom-data",children:"Callbacks & Custom Data"}),"\n",(0,t.jsx)(n.p,{children:"When you initialise a component into the power system, it will automatically gain the ability to receive data from the callbacks below. Custom components also need custom data along with their initialisation into the power system."}),"\n",(0,t.jsx)(n.h3,{id:"receiving-type",children:"Receiving Type"}),"\n",(0,t.jsx)(n.p,{children:"Any component that requires power via the computer to function."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"ComponentClass:sv_onPowerLoss()\n"})}),"\n",(0,t.jsx)(n.p,{children:"Called if the component is a child to the computer when power is lost."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"generating-type",children:"Generating Type"}),"\n",(0,t.jsx)(n.p,{children:"Any component that supplies power to the computers power network."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"ComponentClass:sv_receiveUsedPower( usedPower )\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Called ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://scrapmechanicdocs.com/docs/Game-Script-Environment/Classes/CommonCallbacks#onfixedupdate",children:"onFixedUpdate"})})," to give the component script the used power of any child power networks."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["usedPower [ ",(0,t.jsx)(n.strong,{children:"number"})," ] The power being used by any child power networks."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h3,{id:"battery-type",children:[(0,t.jsx)(n.code,{children:"battery"})," type"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"ComponentClass:sv_receiveChargePower( chargePower )\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Called ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://scrapmechanicdocs.com/docs/Game-Script-Environment/Classes/CommonCallbacks#onfixedupdate",children:"onFixedUpdate"})})," to give the component script the charge power for the battery type."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["chargePower [ ",(0,t.jsx)(n.strong,{children:"number"})," ] The charge power for the battery type."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The custom type data structure is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"{\r\n    chargeRate = 30 -- Number | The power maximum power the battery can charge with.\r\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h3,{id:"breaker-type",children:[(0,t.jsx)(n.code,{children:"breaker"})," type"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"ComponentClass:sv_receiveTransferredPower( transferredPower )\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Called ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://scrapmechanicdocs.com/docs/Game-Script-Environment/Classes/CommonCallbacks#onfixedupdate",children:"onFixedUpdate"})})," to give the component script the transferred power going through the breaker type."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["transferredPower [ ",(0,t.jsx)(n.strong,{children:"number"})," ] The transferred power through the breaker type."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The custom type data structure is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"{\r\n    isActive = true -- Boolean | Whether the breaker type can transfer power or not.\r\n}\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,t.jsx)(n.h3,{id:"createpowerinstance",children:"createPowerInstance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.powerManager.createPowerInstance( shapeId )\n"})}),"\n",(0,t.jsx)(n.p,{children:"Creates a power instance with the given shapeId."}),"\n",(0,t.jsx)(n.admonition,{title:"Note:",type:"info",children:(0,t.jsxs)(n.p,{children:["If you have already specified the isPowered boolean as true in ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/Addon%20API/managers/component-manager#tocomponent",children:"toComponent"})}),", you will not need to add your component to the power manager with this function."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["shapeId [ ",(0,t.jsx)(n.strong,{children:"integer"})," ] The shape id of the component you wish to add to the power system."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"createcustomcomponent",children:"createCustomComponent"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.powerManager.createCustomComponent( shape, type_, data )\n"})}),"\n",(0,t.jsx)(n.p,{children:"Creates a custom specified power component for components that do more than just supply or demand."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["shape [ ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://scrapmechanicdocs.com/docs/Game-Script-Environment/Userdata/Shape#shape",children:"Shape"})})," ] The shape you wish to create as a custom power component."]}),"\n",(0,t.jsxs)(n.li,{children:["type_ [ ",(0,t.jsx)(n.strong,{children:"string"})," ] The custom component type, currently the only types are: ",(0,t.jsx)(n.code,{children:"breaker"})," and ",(0,t.jsx)(n.code,{children:"battery"}),". Each custom type has its respective attributes detailed in ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"#callbacks--custom-data",children:"Callbacks & Custom Data"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["data [ ",(0,t.jsx)(n.strong,{children:"table"})," ] The table of custom data to pass into the instance."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"updatecustomcomponent",children:"updateCustomComponent"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.powerManager.updateCustomComponent( shapeId, data )\n"})}),"\n",(0,t.jsx)(n.p,{children:"Updates the custom data of a custom component."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["shapeId [ ",(0,t.jsx)(n.strong,{children:"integer"})," ] The shape id of the custom component."]}),"\n",(0,t.jsxs)(n.li,{children:["data [ ",(0,t.jsx)(n.strong,{children:"table"})," ] The updated data, see ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"#callbacks--custom-data",children:"Callbacks & Custom Data"})})," for details."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"updatepowerinstance",children:"updatePowerInstance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.powerManager.updatePowerInstance( shapeId, powerPoints )\n"})}),"\n",(0,t.jsx)(n.p,{children:"Updates the power required / generated by a power component."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["shapeId [ ",(0,t.jsx)(n.strong,{children:"integer"})," ] The shape id to update."]}),"\n",(0,t.jsxs)(n.li,{children:["powerPoints [ ",(0,t.jsx)(n.strong,{children:"number"})," ] The updated power points, default after initialisation is 0."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"removepowerinstance",children:"removePowerInstance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.powerManager.removePowerInstance( shapeId )\n"})}),"\n",(0,t.jsx)(n.p,{children:"Removes a component from the power manager, should be done when the component no longer needs to be affected by the power manager."}),"\n",(0,t.jsx)(n.admonition,{title:"Note:",type:"info",children:(0,t.jsxs)(n.p,{children:["If you have already specified the isPowered boolean as true in ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/Addon%20API/managers/component-manager#tocomponent",children:"toComponent"})}),", you will not need to manually remove the component from the power manager."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["shapeId [ ",(0,t.jsx)(n.strong,{children:"integer"})," ] The shape id to remove."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"isenabled",children:"isEnabled"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.powerManager.isEnabled()\n"})}),"\n",(0,t.jsx)(n.p,{children:"Returns true if the power manager is enabled."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["[ ",(0,t.jsx)(n.strong,{children:"boolean"})," ] Whether the power manager is enabled or not."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>c});var s=r(6540);const t={},o=s.createContext(t);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);