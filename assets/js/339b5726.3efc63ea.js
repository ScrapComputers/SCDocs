"use strict";(self.webpackChunkscrap_computers_docs=self.webpackChunkscrap_computers_docs||[]).push([[4380],{117:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>o,frontMatter:()=>t,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"Addon API/modules/sharedtable","title":"SharedTable","description":"A easy way to syncronize a table between the server and clients","source":"@site/docs/Addon API/modules/sharedtable.md","sourceDirName":"Addon API/modules","slug":"/Addon API/modules/sharedtable","permalink":"/docs/Addon API/modules/sharedtable","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"SharedTable","description":"A easy way to syncronize a table between the server and clients"},"sidebar":"sidebar","previous":{"title":"SHA256","permalink":"/docs/Addon API/modules/sha256"},"next":{"title":"String","permalink":"/docs/Addon API/modules/string"}}');var a=s(4848),l=s(8453);const t={title:"SharedTable",description:"A easy way to syncronize a table between the server and clients"},c=void 0,d={},i=[{value:"Functions",id:"functions",level:2},{value:"new",id:"new",level:3},{value:"runTick",id:"runtick",level:3},{value:"init",id:"init",level:3},{value:"forceSync",id:"forcesync",level:3},{value:"forceSyncProperty",id:"forcesyncproperty",level:3},{value:"getSharedTableId",id:"getsharedtableid",level:3},{value:"getRawContents",id:"getrawcontents",level:3},{value:"disableSync",id:"disablesync",level:3},{value:"enableSync",id:"enablesync",level:3},{value:"isSyncingEnabled",id:"issyncingenabled",level:3}];function h(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"SharedTable is a new way of networking, it prevents the hassle of syncing data from the server to the client. Note that shared tables are a lot more costly in network usage."}),"\n",(0,a.jsx)(n.p,{children:"Example usage:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:'MyClass = class()\r\n\r\n-- SERVER --\r\n\r\nfunction MyClass:server_onCreate()\r\n    sm.scrapcomputers.sharedTable:init(self)\r\n\r\n    self.sv = {}\r\n\r\n    -- Shared tables automaticly sync variables at the root level, if you\r\n    -- are modifing a data inside of a table (eg self.sv.sharedData.myTable.myValue),\r\n    -- you will have to manually sync it with sm.scrapcomputers.sharedTable:forceSync\r\n\r\n    self.sv.sharedTable = sm.scrapcomputers.sharedTable:new(self, "self.cl.sharedTable")\r\n    self.sv.sharedTable.myCounter = 0\r\nend\r\n\r\nfunction MyClass:server_onFixedUpdate()\r\n    sm.scrapcomputers.sharedTable:runTick(self)\r\n\r\n    print("Server Current counter", self.sv.sharedTable.myCounter)\r\nend\r\n\r\n-- This event gets called when a client is updating a shared table, it can be used to allow-deny the client.\r\n-- To block data, return false. Note that you are able to cause corruption with this so handle it with care!\r\n--\r\n-- This event is not required to be defined, by default it allows anything\r\n---@param data {id: integer, data: any?, isEnd: boolean}\r\n---@param player Player\r\nfunction MyClass:server_onSharedTableEventReceived(data, player)\r\n    return true\r\nend\r\n\r\n-- This event gets called when theres a variable change in the shared table. It can be used to rewrap objects\r\n-- to have their functions back. You can also return a boolean to allow the change or not.\r\n--\r\n-- comesFromSelf is true when the server edits the variable. if false then it was done by a client.\r\nfunction MyClass:server_onSharedTableChange(id, key, value, comesFromSelf, player)\r\n    return true\r\nend\r\n\r\n-- CLIENT --\r\n\r\nfunction MyClass:client_onCreate()\r\n    sm.scrapcomputers.sharedTable:init(self)\r\n\r\n    self.cl = {}\r\nend\r\n\r\nfunction MyClass:client_onFixedUpdate()\r\n    sm.scrapcomputers.sharedTable:runTick(self)\r\n\r\n    print("Server Current counter", self.cl.sharedTable.myCounter)\r\nend\r\n\r\nfunction MyClass:client_onInteract()\r\n    self.cl.sharedTable.myCounter = 0\r\n    print("Resetted counter!")\r\nend\r\n\r\n-- This event gets called when theres a variable change in the shared table. It can be used to rewrap objects\r\n-- to have their functions back. You can also return a boolean to allow the change or not.\r\n--\r\n-- comesFromSelf is true when the server edits the variable. if false then it was done by the client.\r\nfunction MyClass:client_onSharedTableChange(id, key, value, comesFromSelf)\r\n    return true\r\nend\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,a.jsx)(n.h3,{id:"new",children:"new"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:new( classInstance, clientPath )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Creates a new shared table (server-side)."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["classInstance [ ",(0,a.jsx)(n.strong,{children:"SharedTable.ShapeClass"})," ] The class instance (i.e., ",(0,a.jsx)(n.code,{children:"self"})," for the class)."]}),"\n",(0,a.jsxs)(n.li,{children:["clientPath [ ",(0,a.jsx)(n.strong,{children:"string"})," ] The path on the client to store the shared table."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["[ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The newly created shared table."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"runtick",children:"runTick"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:runTick( classInstance )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Runs a tick for SharedTables."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["classInstance [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"https://scrapmechanicdocs.com/docs/Game-Script-Environment/Classes/ShapeClass#shapeclass",children:"ShapeClass"})})," ] The class instance (i.e., ",(0,a.jsx)(n.code,{children:"self"})," for the class)."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"init",children:"init"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:init( classInstance )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Initializes for shared tables to be used."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["classInstance [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"https://scrapmechanicdocs.com/docs/Game-Script-Environment/Classes/ShapeClass#shapeclass",children:"ShapeClass"})})," ] The class instance (i.e., ",(0,a.jsx)(n.code,{children:"self"})," for the class)."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"forcesync",children:"forceSync"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:forceSync( sharedTable )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Forcefully syncs a SharedTable."}),"\n",(0,a.jsxs)(n.p,{children:["This is necessary when the SharedTable contains inner tables.",(0,a.jsx)(n.br,{}),"\n","Can be network-expensive as it sends all values over the network."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["sharedTable [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The shared table to sync"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"forcesyncproperty",children:"forceSyncProperty"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:forceSyncProperty( sharedTable, propertyIndex )\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Forcefully syncs a specific property in a SharedTable.",(0,a.jsx)(n.br,{}),"\n","This is necessary if the SharedTable contains inner tables."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["sharedTable [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The shared table to sync"]}),"\n",(0,a.jsxs)(n.li,{children:["propertyIndex [ ",(0,a.jsx)(n.strong,{children:"string"})," ] The property to sync."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"getsharedtableid",children:"getSharedTableId"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:getSharedTableId( sharedTable )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Gets the ID of the SharedTable."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["sharedTable [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The shared table to query"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["[ ",(0,a.jsx)(n.strong,{children:"integer"})," ] The ID of the shared table."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"getrawcontents",children:"getRawContents"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:getRawContents( sharedTable )\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Gets the raw contents of a SharedTable (without metamethods).",(0,a.jsx)(n.br,{}),"\n","Any modifications applied to the raw contents will ",(0,a.jsx)(n.strong,{children:"NOT"})," be reflected in the shared table itself."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["sharedTable [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The shared table to query"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["[ ",(0,a.jsx)(n.strong,{children:"table"})," ] The raw contents of the shared table."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"disablesync",children:"disableSync"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:disableSync( sharedTable )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Disables syncing for a SharedTable."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["sharedTable [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The shared table to disable syncing for."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"enablesync",children:"enableSync"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:enableSync( sharedTable )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Enables syncing for a SharedTable."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["sharedTable [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The shared table to enable syncing for."]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"issyncingenabled",children:"isSyncingEnabled"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-lua",children:"sm.scrapcomputers.sharedTable:isSyncingEnabled( sharedTable )\n"})}),"\n",(0,a.jsx)(n.p,{children:"Returns whether syncing is enabled for a SharedTable."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Arguments:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["sharedTable [ ",(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"/docs/Addon%20API/modules/sharedtable",children:"SharedTable"})})," ] The shared table to check."]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["[ ",(0,a.jsx)(n.strong,{children:"boolean"})," ] Whether syncing is enabled for the table."]}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var r=s(6540);const a={},l=r.createContext(a);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);